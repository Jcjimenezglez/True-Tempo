<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Conversion Tracking - Superfocus</title>
    
    <!-- Google Tag Manager (same as production) -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PWPTLLHZ');</script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T3T0PES8C0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-T3T0PES8C0');
    </script>
    
    <!-- Google Ads Conversion Tracking -->
    <script>
        gtag('config', 'AW-17614436696');
    </script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background 0.2s;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        button.secondary {
            background: #6c757d;
        }
        
        button.secondary:hover {
            background: #545b62;
        }
        
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }
        
        .log-entry.success {
            background: #d4edda;
            color: #155724;
        }
        
        .log-entry.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .log-entry.info {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .log-entry.warning {
            background: #fff3cd;
            color: #856404;
        }
        
        pre {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            overflow-x: auto;
            font-size: 14px;
        }
        
        .conversion-info {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .conversion-info h3 {
            margin-top: 0;
            color: #0066cc;
        }
        
        .conversion-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .conversion-info li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWPTLLHZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    
    <div class="container">
        <h1>üß™ Test Conversion Tracking - Superfocus</h1>
        <p>Esta p√°gina te permite probar el tracking de conversiones de Google Ads para signups y suscripciones.</p>
        
        <div class="conversion-info">
            <h3>üìä IDs de Conversi√≥n Configurados:</h3>
            <ul>
                <li><strong>Signup:</strong> AW-17614436696/kfFJCLb0ma0bENjym89B</li>
                <li><strong>Subscription:</strong> AW-17614436696/uBZgCNz9pq0bENjym89B</li>
            </ul>
        </div>
        
        <div class="status info">
            <strong>‚ÑπÔ∏è Instrucciones:</strong><br>
            1. Desactiva tu ad blocker para este sitio<br>
            2. Haz clic en los botones de test abajo<br>
            3. Observa los logs aqu√≠ y en la consola del navegador (F12)<br>
            4. Verifica en Google Ads en 2-3 horas
        </div>
        
        <div id="statusContainer"></div>
        
        <h3>üéØ Acciones de Test:</h3>
        <button onclick="testSignupConversion()">Test Signup Conversion</button>
        <button onclick="testSubscriptionConversion()">Test Subscription Conversion</button>
        <button onclick="testGtagAvailability()" class="secondary">Verificar gtag</button>
        <button onclick="simulateRealFlow()" class="secondary">Simular Flujo Real</button>
        <button onclick="clearLogs()" class="secondary">Limpiar Logs</button>
        
        <h3>üìä Logs de Tracking:</h3>
        <div class="log" id="logContainer">
            <div class="log-entry info">Esperando acci√≥n...</div>
        </div>
        
        <h3>üìã C√≥digo de Tracking:</h3>
        <pre id="codeDisplay">// Selecciona una acci√≥n para ver el c√≥digo</pre>
    </div>
    
    <script>
        const logContainer = document.getElementById('logContainer');
        const statusContainer = document.getElementById('statusContainer');
        const codeDisplay = document.getElementById('codeDisplay');
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        function showStatus(message, type = 'info') {
            statusContainer.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        function clearLogs() {
            logContainer.innerHTML = '<div class="log-entry info">Logs limpiados...</div>';
            statusContainer.innerHTML = '';
        }
        
        function testGtagAvailability() {
            addLog('üîç Verificando disponibilidad de gtag...', 'info');
            
            if (typeof gtag === 'undefined') {
                addLog('‚ùå ERROR: gtag no est√° disponible', 'error');
                showStatus('<strong>‚ùå Error</strong><br>gtag no est√° disponible. Verifica que Google Tag Manager est√© cargando.<br><br><strong>Soluci√≥n:</strong> Desactiva tu ad blocker y recarga la p√°gina.', 'error');
                return false;
            } else {
                addLog('‚úÖ gtag est√° disponible', 'success');
                showStatus('<strong>‚úÖ gtag disponible</strong><br>El tracking de conversiones deber√≠a funcionar correctamente.', 'success');
                return true;
            }
        }
        
        function testSignupConversion() {
            addLog('üéØ Iniciando test de conversi√≥n de signup...', 'info');
            
            if (!testGtagAvailability()) {
                return;
            }
            
            try {
                // Google Ads conversion tracking
                addLog('üì° Enviando conversi√≥n de signup a Google Ads...', 'info');
                gtag('event', 'conversion', {
                    'send_to': 'AW-17614436696/HLp9CM6Plq0bENjym89B',
                    'value': 1.0,
                    'currency': 'USD'
                });
                addLog('‚úÖ Conversi√≥n de signup enviada a Google Ads', 'success');
                
                // Google Analytics event
                addLog('üì° Enviando evento de signup a Google Analytics...', 'info');
                gtag('event', 'sign_up', {
                    'method': 'clerk',
                    'event_category': 'engagement',
                    'event_label': 'user_signup'
                });
                addLog('‚úÖ Evento de signup enviado a Google Analytics', 'success');
                
                addLog('üéâ Test de signup completado exitosamente', 'success');
                
                showStatus('<strong>‚úÖ Test de Signup Exitoso</strong><br>La conversi√≥n de signup fue enviada correctamente.<br>Verifica en Google Ads en 2-3 horas.', 'success');
                
                // Show code
                codeDisplay.textContent = `// Signup Conversion Tracking
gtag('event', 'conversion', {
    'send_to': 'AW-17614436696/HLp9CM6Plq0bENjym89B',
    'value': 1.0,
    'currency': 'USD'
});

gtag('event', 'sign_up', {
    'method': 'clerk',
    'event_category': 'engagement',
    'event_label': 'user_signup'
});`;
                
            } catch (error) {
                addLog(`‚ùå Error en test de signup: ${error.message}`, 'error');
                showStatus('<strong>‚ùå Error en Test</strong><br>Hubo un error al enviar la conversi√≥n de signup.', 'error');
            }
        }
        
        function testSubscriptionConversion() {
            addLog('üéØ Iniciando test de conversi√≥n de suscripci√≥n...', 'info');
            
            if (!testGtagAvailability()) {
                return;
            }
            
            try {
                // Google Ads conversion tracking
                addLog('üì° Enviando conversi√≥n de suscripci√≥n a Google Ads...', 'info');
                gtag('event', 'conversion', {
                    'send_to': 'AW-17614436696/uBZgCNz9pq0bENjym89B',
                    'value': 9.0,
                    'currency': 'USD'
                });
                addLog('‚úÖ Conversi√≥n de suscripci√≥n enviada a Google Ads', 'success');
                
                // Google Analytics event
                addLog('üì° Enviando evento de compra a Google Analytics...', 'info');
                gtag('event', 'purchase', {
                    'transaction_id': 'superfocus_pro_' + Date.now(),
                    'value': 9.0,
                    'currency': 'USD',
                    'event_category': 'ecommerce',
                    'event_label': 'pro_subscription'
                });
                addLog('‚úÖ Evento de compra enviado a Google Analytics', 'success');
                
                addLog('üéâ Test de suscripci√≥n completado exitosamente', 'success');
                
                showStatus('<strong>‚úÖ Test de Suscripci√≥n Exitoso</strong><br>La conversi√≥n de suscripci√≥n fue enviada correctamente.<br>Verifica en Google Ads en 2-3 horas.', 'success');
                
                // Show code
                codeDisplay.textContent = `// Subscription Conversion Tracking
gtag('event', 'conversion', {
    'send_to': 'AW-17614436696/uBZgCNz9pq0bENjym89B',
    'value': 9.0,
    'currency': 'USD'
});

gtag('event', 'purchase', {
    'transaction_id': 'superfocus_pro_' + Date.now(),
    'value': 9.0,
    'currency': 'USD',
    'event_category': 'ecommerce',
    'event_label': 'pro_subscription'
});`;
                
            } catch (error) {
                addLog(`‚ùå Error en test de suscripci√≥n: ${error.message}`, 'error');
                showStatus('<strong>‚ùå Error en Test</strong><br>Hubo un error al enviar la conversi√≥n de suscripci√≥n.', 'error');
            }
        }
        
        function simulateRealFlow() {
            addLog('üéØ Simulando flujo real de conversi√≥n...', 'info');
            
            // Simulate signup first
            setTimeout(() => {
                addLog('üìù Simulando signup...', 'info');
                testSignupConversion();
            }, 1000);
            
            // Then simulate subscription after 3 seconds
            setTimeout(() => {
                addLog('üí≥ Simulando suscripci√≥n...', 'info');
                testSubscriptionConversion();
            }, 4000);
        }
        
        // Auto-check gtag availability on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                testGtagAvailability();
            }, 1000);
        });
    </script>
</body>
</html>
